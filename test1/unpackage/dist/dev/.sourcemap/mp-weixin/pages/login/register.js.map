{"version":3,"file":"register.js","sources":["pages/login/register.vue","C:/Users/30302/Documents/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"register-card\">\n      <view class=\"header\">\n        <text class=\"title\">用户注册</text>\n      </view>\n\n      <view class=\"form-area\">\n        \n        <view class=\"input-group\">\n          <text class=\"label\">账号 <text class=\"required\">*</text></text>\n          <view class=\"input-wrapper\">\n            <input class=\"input-field\" v-model=\"form.username\" placeholder=\"设置您的账号\" placeholder-class=\"placeholder-style\" />\n          </view>\n        </view>\n\n        <view class=\"input-group\">\n          <text class=\"label\">昵称</text>\n          <view class=\"input-wrapper\">\n            <input class=\"input-field\" v-model=\"form.nickname\" placeholder=\"怎么称呼您 (选填)\" placeholder-class=\"placeholder-style\" />\n          </view>\n        </view>\n\n        <view class=\"input-group\">\n          <text class=\"label\">性别</text>\n          <view class=\"input-wrapper\">\n            <picker @change=\"bindGenderChange\" :value=\"genderIndex\" :range=\"genderOptions\" range-key=\"label\" style=\"width:100%\">\n              <view class=\"input-field picker-view\" :class=\"{ empty: !genderText }\">\n                {{ genderText || '请选择性别' }}\n              </view>\n            </picker>\n             <uni-icons type=\"bottom\" size=\"16\" color=\"#c0c4cc\"></uni-icons>\n          </view>\n        </view>\n\n        <view class=\"input-group\">\n          <text class=\"label\">出生日期</text>\n          <view class=\"input-wrapper\">\n            <picker mode=\"date\" :value=\"form.birthday\" start=\"1900-01-01\" end=\"2030-12-31\" @change=\"bindDateChange\" style=\"width:100%\">\n              <view class=\"input-field picker-view\" :class=\"{ empty: !form.birthday }\">\n                {{ form.birthday || '请选择出生日期' }}\n              </view>\n            </picker>\n            <uni-icons type=\"calendar\" size=\"16\" color=\"#c0c4cc\"></uni-icons>\n          </view>\n        </view>\n\n        <view class=\"input-group\">\n          <text class=\"label\">手机号码</text>\n          <view class=\"input-wrapper\">\n            <input class=\"input-field\" type=\"number\" maxlength=\"11\" v-model=\"form.phone\" placeholder=\"方便找回密码 (选填)\" placeholder-class=\"placeholder-style\" />\n          </view>\n        </view>\n\n        <view class=\"input-group\">\n          <text class=\"label\">密码 <text class=\"required\">*</text></text>\n          <view class=\"input-wrapper\">\n            <input class=\"input-field\" :password=\"!showPassword\" v-model=\"form.password\" placeholder=\"设置密码\" placeholder-class=\"placeholder-style\" />\n            <view class=\"password-toggle\" @click=\"showPassword = !showPassword\">\n              <uni-icons :type=\"showPassword ? 'eye-filled' : 'eye-slash-filled'\" size=\"20\" color=\"#c0c4cc\"></uni-icons>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"input-group\">\n          <text class=\"label\">确认密码 <text class=\"required\">*</text></text>\n          <view class=\"input-wrapper\">\n            <input class=\"input-field\" :password=\"!showConfirmPassword\" v-model=\"form.confirmPassword\" placeholder=\"请再次输入密码\" placeholder-class=\"placeholder-style\" />\n            <view class=\"password-toggle\" @click=\"showConfirmPassword = !showConfirmPassword\">\n              <uni-icons :type=\"showConfirmPassword ? 'eye-filled' : 'eye-slash-filled'\" size=\"20\" color=\"#c0c4cc\"></uni-icons>\n            </view>\n          </view>\n        </view>\n\n        <button class=\"register-btn\" @click=\"handleUserRegister\" :disabled=\"isSubmitting\" :class=\"{loading: isSubmitting}\">\n          {{ isSubmitting ? '正在注册...' : '注 册' }}\n        </button>\n\n        <view class=\"footer-links\">\n          <text class=\"footer-text\">已有账号？</text>\n          <text class=\"footer-link\" @click=\"goToLogin\">去登录</text>\n        </view>\n\n      </view>\n    </view>\n  </view>\n</template>\r\n\r\n<script>\r\n\tconst API_BASE_URL = 'http://127.0.0.1:8081/api';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\tusername: '',\r\n\t\t\t\t\tnickname: '',\r\n\t\t\t\t\tgender: '', // 传给后端的数值 (1, 0, 2)\r\n\t\t\t\t\tbirthday: '',\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t\tconfirmPassword: ''\r\n\t\t\t\t},\r\n\t\t\t\t// 性别选择器配置\r\n\t\t\t\tgenderOptions: [{\r\n\t\t\t\t\t\tlabel: '男',\r\n\t\t\t\t\t\tvalue: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel: '女',\r\n\t\t\t\t\t\tvalue: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel: '其他',\r\n\t\t\t\t\t\tvalue: 2\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tgenderIndex: -1, // picker 的索引\r\n\t\t\t\tgenderText: '', // 显示在输入框的文字\r\n\r\n\t\t\t\tshowPassword: false,\r\n\t\t\t\tshowConfirmPassword: false,\r\n\t\t\t\tisSubmitting: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoToLogin() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\r\n\t\t\t// 处理性别选择\r\n\t\t\tbindGenderChange(e) {\r\n\t\t\t\tthis.genderIndex = e.detail.value;\r\n\t\t\t\tconst selected = this.genderOptions[this.genderIndex];\r\n\t\t\t\tthis.genderText = selected.label;\r\n\t\t\t\tthis.form.gender = selected.value; // 保存 1, 0, 2 到表单\r\n\t\t\t},\r\n\r\n\t\t\t// 处理日期选择\r\n\t\t\tbindDateChange(e) {\r\n\t\t\t\tthis.form.birthday = e.detail.value; // YYYY-MM-DD\r\n\t\t\t},\r\n\r\n\t\t\thandleUserRegister() {\r\n\t\t\t\tif (!this.form.username) return uni.showToast({\r\n\t\t\t\t\ttitle: '请输入账号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\tif (!this.form.password) return uni.showToast({\r\n\t\t\t\t\ttitle: '请输入密码',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\tif (this.form.password !== this.form.confirmPassword) {\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '两次密码不一致',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.isSubmitting = true;\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: API_BASE_URL + '/user/register',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusername: this.form.username,\r\n\t\t\t\t\t\tnickname: this.form.nickname,\r\n\t\t\t\t\t\tgender: this.form.gender === '' ? null : this.form.gender, // 确保空值传null\r\n\t\t\t\t\t\tbirthday: this.form.birthday,\r\n\t\t\t\t\t\tphone: this.form.phone,\r\n\t\t\t\t\t\tpassword: this.form.password\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data && res.data.success) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '注册成功',\r\n\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.goToLogin();\r\n\t\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.message || '注册失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.isSubmitting = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/* 复用前面页面的优秀样式 */\r\n\t.container {\r\n\t\tmin-height: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: #f0f2f5;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.register-card {\r\n\t\tbackground: rgba(255, 255, 255, 0.98);\r\n\t\twidth: 100%;\r\n\t\tmax-width: 680rpx;\r\n\t\tpadding: 50rpx 40rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t\tbox-shadow: 0 12rpx 40rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.header {\r\n\t\tmargin-bottom: 40rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 40rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.input-group {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.label {\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #606266;\r\n\t}\r\n\r\n\t.required {\r\n\t\tcolor: #ff4d4f;\r\n\t\tmargin-left: 4rpx;\r\n\t}\r\n\r\n\t/* --- 增强版输入框容器 --- */\r\n\t.input-wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #f5f7fa;\r\n\t\t/* 浅灰蓝背景 */\r\n\t\tborder: 2rpx solid #e4e7ed;\r\n\t\t/* 浅边框 */\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 0 24rpx;\r\n\t\theight: 90rpx;\r\n\t\t/* 注册页输入项多，高度稍微紧凑一点 */\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\r\n\t.input-wrapper:focus-within {\r\n\t\tbackground: #fff;\r\n\t\tborder-color: #1890FF;\r\n\t\tbox-shadow: 0 0 0 6rpx rgba(24, 144, 255, 0.1);\r\n\t}\r\n\r\n\t.input-field {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.placeholder-style {\r\n\t\tcolor: #c0c4cc;\r\n\t}\r\n\r\n\t.picker-view.empty {\r\n\t\tcolor: #c0c4cc;\r\n\t}\r\n\r\n\t/* Picker空值颜色 */\r\n\r\n\t.register-btn {\r\n\t\tbackground: linear-gradient(135deg, #3B9DFF 0%, #1890FF 100%);\r\n\t\tcolor: white;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tborder-radius: 50rpx;\r\n\t\theight: 96rpx;\r\n\t\tline-height: 96rpx;\r\n\t\tbox-shadow: 0 10rpx 20rpx rgba(24, 144, 255, 0.3);\r\n\t\tborder: none;\r\n\t\tmargin-top: 40rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.register-btn:active {\r\n\t\topacity: 0.9;\r\n\t\ttransform: scale(0.99);\r\n\t}\r\n\r\n\t.footer-links {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tgap: 10rpx;\r\n\t}\r\n\r\n\t.footer-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.footer-link {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #1890FF;\r\n\t\tfont-weight: 600;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/my-fullstack-project/test1/pages/login/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAyFC,MAAM,eAAe;AAErB,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,MAAM;AAAA,QACL,UAAU;AAAA,QACV,UAAU;AAAA,QACV,QAAQ;AAAA;AAAA,QACR,UAAU;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,iBAAiB;AAAA,MACjB;AAAA;AAAA,MAED,eAAe;AAAA,QAAC;AAAA,UACd,OAAO;AAAA,UACP,OAAO;AAAA,QACP;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,OAAO;AAAA,QACP;AAAA,QACD;AAAA,UACC,OAAO;AAAA,UACP,OAAO;AAAA,QACR;AAAA,MACA;AAAA,MACD,aAAa;AAAA;AAAA,MACb,YAAY;AAAA;AAAA,MAEZ,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,cAAc;AAAA,IACf;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,YAAY;AACXA,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA;AAAA,IAGD,iBAAiB,GAAG;AACnB,WAAK,cAAc,EAAE,OAAO;AAC5B,YAAM,WAAW,KAAK,cAAc,KAAK,WAAW;AACpD,WAAK,aAAa,SAAS;AAC3B,WAAK,KAAK,SAAS,SAAS;AAAA,IAC5B;AAAA;AAAA,IAGD,eAAe,GAAG;AACjB,WAAK,KAAK,WAAW,EAAE,OAAO;AAAA,IAC9B;AAAA,IAED,qBAAqB;AACpB,UAAI,CAAC,KAAK,KAAK;AAAU,eAAOA,cAAAA,MAAI,UAAU;AAAA,UAC7C,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD,UAAI,CAAC,KAAK,KAAK;AAAU,eAAOA,cAAAA,MAAI,UAAU;AAAA,UAC7C,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD,UAAI,KAAK,KAAK,aAAa,KAAK,KAAK,iBAAiB;AACrD,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAEA,WAAK,eAAe;AAEpBA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,eAAe;AAAA,QACpB,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,UAAU,KAAK,KAAK;AAAA,UACpB,UAAU,KAAK,KAAK;AAAA,UACpB,QAAQ,KAAK,KAAK,WAAW,KAAK,OAAO,KAAK,KAAK;AAAA;AAAA,UACnD,UAAU,KAAK,KAAK;AAAA,UACpB,OAAO,KAAK,KAAK;AAAA,UACjB,UAAU,KAAK,KAAK;AAAA,QACpB;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,QAAQ,IAAI,KAAK,SAAS;AACjCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACP,CAAC;AACD,uBAAW,MAAM;AAChB,mBAAK,UAAS;AAAA,YACd,GAAE,IAAI;AAAA,iBACD;AACNA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK,WAAW;AAAA,cAC3B,MAAM;AAAA,YACP,CAAC;AAAA,UACF;AAAA,QACA;AAAA,QACD,MAAM,CAAC,QAAQ;AACdA,wBAAAA,MAAc,MAAA,SAAA,mCAAA,GAAG;AACjBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAAA,QACD;AAAA,QACD,UAAU,MAAM;AACf,eAAK,eAAe;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxMD,GAAG,WAAW,eAAe;"}